_format_version: "3.0"
_transform: true

services:
  - name: cotizacion-service
    host: cotizacion.internal
    protocol: http
    port: 8080
    routes:
      - name: cotizacion-route
        paths:
          - /cotizacion
        strip_path: true

upstreams:
  - name: cotizacion.internal
    targets:
      - target: 172.31.30.143:8080
      - target: 172.31.29.58:8080
      - target: 172.31.16.244:8080
      - target: 172.31.30.9:8080
    healthchecks:
      passive:
        unhealthy:
          http_failures: 5
      active:
        type: http
        http_path: /actuator/health
        healthy:
          interval: 10
          successes: 2
        unhealthy:
          interval: 10
          http_failures: 3

