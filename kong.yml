_format_version: "2.1"

services:
  - name: provesi_cotizacion_service
    host: provesi_cotizacion_upstream
    protocol: http
    routes:
      - name: provesi_cotizacion_routes
        paths:
          - /cotizacion
          - /cotizaciones
          - /crear-cotizacion
          - /consultar-cotizacion
        strip_path: false

upstreams:
  - name: provesi_cotizacion_upstream
    algorithm: round-robin
    targets:
      - target: 172.31.10.11:8080   # provesi-cotizacion-a (IP privada)
        weight: 100
      - target: 172.31.15.34:8080   # provesi-cotizacion-b
        weight: 100
      - target: 172.31.22.47:8080   # provesi-cotizacion-c
        weight: 100
      - target: 172.31.30.62:8080   # provesi-cotizacion-d
        weight: 100

# La instancia general NO se balancea, se accede directamente a su IP p√∫blica.
